Restarting SMD build with fixed artifacts at Sun Oct  5 02:55:02 UTC 2025
Base version: 2.9.4
Next version: 2.9.5
Step 1/48 : ARG TAG_FOR_BASE_MICROMAMBA_IMAGE

Step 2/48 : FROM mambaorg/micromamba:$TAG_FOR_BASE_MICROMAMBA_IMAGE

---> 2d032fb5e373
Step 3/48 : ARG CUDA_MAJOR_MINOR_VERSION=''

---> Using cache
---> bbc6e6cdc8c1
Step 4/48 : ARG ENV_IN_FILENAME

---> Using cache
---> 4ae37ccba633
Step 5/48 : ARG PINNED_ENV_IN_FILENAME

---> Using cache
---> 90732aa1ab3a
Step 6/48 : ARG ARG_BASED_ENV_IN_FILENAME

---> Using cache
---> aa9087f68c69
Step 7/48 : ARG IMAGE_VERSION

---> Using cache
---> 1644b104b7de
Step 8/48 : LABEL "org.amazon.sagemaker-distribution.image.version"=$IMAGE_VERSION

---> Using cache
---> dd53a536fc31
Step 9/48 : ARG AMZN_BASE="/opt/amazon/sagemaker"

---> Using cache
---> 77ab66333774
Step 10/48 : ARG DB_ROOT_DIR="/opt/db"

---> Using cache
---> 0d88db035883
Step 11/48 : ARG DIRECTORY_TREE_STAGE_DIR="${AMZN_BASE}/dir-staging"

---> Using cache
---> 7171829a2b69
Step 12/48 : ARG NB_USER="sagemaker-user"

---> Using cache
---> 3a5d3d85f381
Step 13/48 : ARG NB_UID=1000

---> Using cache
---> 9ff2d0b92ecc
Step 14/48 : ARG NB_GID=100

---> Using cache
---> 91d383da1f68
Step 15/48 : ARG FIPS_VALIDATED_SSL=3.0.8

---> Using cache
---> 21979d81ec36
Step 16/48 : ARG MIN_REQUIRED_MICROMAMBA_VERSION=1.5.11

---> Using cache
---> d4d966f2745e
Step 17/48 : ENV SAGEMAKER_LOGGING_DIR="/var/log/sagemaker/"

---> Using cache
---> 7f186a71fcb0
Step 18/48 : ENV STUDIO_LOGGING_DIR="/var/log/studio/"

---> Using cache
---> c5f227613a43
Step 19/48 : ENV EDITOR="nano"

---> Using cache
---> 005eebe82291
Step 20/48 : ENV IMAGE_VERSION=$IMAGE_VERSION

---> Using cache
---> a8a583090616
Step 21/48 : ENV PINNED_MICROMAMBA_MINOR_VERSION="1.5.*"

---> Using cache
---> 49e044140848
Step 22/48 : ENV SAGEMAKER_RECOVERY_MODE_HOME=/tmp/sagemaker-recovery-mode-home

---> Using cache
---> 0d9b50ba0383
Step 23/48 : USER root

---> Using cache
---> fd532e3e478f
Step 24/48 : RUN CURRENT_MICROMAMBA_VERSION=$(micromamba --version) &&     echo "Current micromamba version: $CURRENT_MICROMAMBA_VERSION" &&     if [[ "$CURRENT_MICROMAMBA_VERSION" == $PINNED_MICROMAMBA_MINOR_VERSION ]]; then         echo "Upgrading micromamba to the latest $PINNED_MICROMAMBA_MINOR_VERSION version..." &&         micromamba self-update -c conda-forge --version "$MIN_REQUIRED_MICROMAMBA_VERSION" &&         micromamba clean --all --yes --force-pkgs-dirs;     else         echo "Micromamba is already at version $CURRENT_MICROMAMBA_VERSION (outside $PINNED_MICROMAMBA_MINOR_VERSION). No upgrade performed.";     fi

---> Using cache
---> 92d093feabb6
Step 25/48 : RUN usermod "--login=${NB_USER}" "--home=/home/${NB_USER}" --move-home "-u ${NB_UID}" "${MAMBA_USER}" &&     groupmod "--new-name=${NB_USER}" --non-unique "-g ${NB_GID}" "${MAMBA_USER}" &&     echo "${NB_USER}" > "/etc/arg_mamba_user" &&     :

---> Using cache
---> 4e59a0287530
Step 26/48 : ENV MAMBA_USER=$NB_USER

---> Using cache
---> f0fc7b0aaabb
Step 27/48 : ENV USER=$NB_USER

---> Using cache
---> 71445978c531
Step 28/48 : COPY aws-cli-public-key.asc /tmp/

---> Using cache
---> 63cb8e099495
Step 29/48 : COPY get_amazon_q_agentic_chat_artifacts.py /tmp/

---> Using cache
---> ee0d510c1422
Step 30/48 : RUN apt-get update && apt-get upgrade -y &&     apt-get install -y --no-install-recommends sudo gettext-base wget curl unzip git rsync build-essential openssh-client nano cron less mandoc jq ca-certificates gnupg &&     DEBIAN_FRONTEND=noninteractive apt-get install -y --no-install-recommends tzdata krb5-user libkrb5-dev libsasl2-dev libsasl2-modules &&     chmod g+w /etc/passwd &&     echo "ALL    ALL=(ALL)    NOPASSWD:    ALL" >> /etc/sudoers &&     touch /etc/krb5.conf.lock && chown ${NB_USER}:${MAMBA_USER} /etc/krb5.conf* &&     curl -O "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" &&     curl -O "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip.sig" &&     gpg --import /tmp/aws-cli-public-key.asc &&     gpg --trust-model always --verify awscli-exe-linux-x86_64.zip.sig awscli-exe-linux-x86_64.zip ||        (echo "GPG verification failed" && exit 1) &&     unzip awscli-exe-linux-x86_64.zip &&     sudo ./aws/install &&     rm -rf aws awscli-exe-linux-x86_64.zip awscli-exe-linux-x86_64.zip.sig aws-cli-public-key.asc &&     : &&     curl --proto '=https' --tlsv1.2 -sSf "https://desktop-release.q.us-east-1.amazonaws.com/latest/q-x86_64-linux.zip" -o "q.zip" &&     unzip q.zip &&     Q_INSTALL_GLOBAL=true ./q/install.sh --no-confirm &&     rm -rf q q.zip &&     echo "source /usr/local/bin/_activate_current_env.sh" | tee --append /etc/profile &&     mkdir -p /opt/amazon/sagemaker/sagemaker-code-editor-server-data /opt/amazon/sagemaker/sagemaker-code-editor-user-data     && chown $MAMBA_USER:$MAMBA_USER /opt/amazon/sagemaker/sagemaker-code-editor-server-data /opt/amazon/sagemaker/sagemaker-code-editor-user-data &&     mkdir -p /opt/amazon/sagemaker/user-data     && chown $MAMBA_USER:$MAMBA_USER /opt/amazon/sagemaker/user-data &&     mkdir -p ${DIRECTORY_TREE_STAGE_DIR}

---> Using cache
---> f35dc4ecdeb1
Step 31/48 : COPY dirs/ ${DIRECTORY_TREE_STAGE_DIR}/

---> Using cache
---> afe296529869
Step 32/48 : RUN rsync -a ${DIRECTORY_TREE_STAGE_DIR}/ / &&     rm -rf ${DIRECTORY_TREE_STAGE_DIR} &&     mkdir -p /etc/code-editor/extensions &&     while IFS= read -r url || [ -n "$url" ]; do         echo "Downloading extension from ${url}..." &&         wget --no-check-certificate -P /etc/code-editor/extensions "${url}";     done < /etc/code-editor/extensions.txt

---> Using cache
---> 8e509af39b15
Step 33/48 : USER $MAMBA_USER

---> Using cache
---> 6d2bcb9fcbb5
Step 34/48 : COPY --chown=$MAMBA_USER:$MAMBA_USER $ENV_IN_FILENAME *.in /tmp/

---> e50016942876
Step 35/48 : COPY --chown=$MAMBA_USER:$MAMBA_USER $PINNED_ENV_IN_FILENAME *.in /tmp/

---> fe3475f2f746
Step 36/48 : ARG MAMBA_DOCKERFILE_ACTIVATE=1

---> Running in d8c14c1209c6
---> Removed intermediate container d8c14c1209c6
---> 1a62aed91542
Step 37/48 : ARG CONDA_OVERRIDE_CUDA=$CUDA_MAJOR_MINOR_VERSION

---> Running in b43e5e2dd346
---> Removed intermediate container b43e5e2dd346
---> 77535fa69221
Step 38/48 : RUN if [[ -z $ARG_BASED_ENV_IN_FILENAME ]] ;     then echo 'No ARG_BASED_ENV_IN_FILENAME passed' ;     else envsubst < /tmp/$ARG_BASED_ENV_IN_FILENAME | tee --append /tmp/$ENV_IN_FILENAME ;     fi &&     micromamba install -y --name base --file /tmp/$ENV_IN_FILENAME --file /tmp/$PINNED_ENV_IN_FILENAME &&     mkdir -p $SAGEMAKER_RECOVERY_MODE_HOME &&     chown $MAMBA_USER:$MAMBA_USER $SAGEMAKER_RECOVERY_MODE_HOME &&     SUPERVISOR_VERSION=$(grep "^conda-forge::supervisor\[" /tmp/$ENV_IN_FILENAME) &&     JUPYTERLAB_VERSION=$(grep "^conda-forge::jupyterlab\[" /tmp/$ENV_IN_FILENAME) &&     SAGEMAKER_JUPYTERLAB_VERSION=$(grep "^conda-forge::sagemaker-jupyterlab-extension" /tmp/$ENV_IN_FILENAME) &&     echo "Installing in sagemaker-recovery-mode micromamba environment: $JUPYTERLAB_VERSION $SAGEMAKER_JUPYTERLAB_VERSION" &&     micromamba create -n sagemaker-recovery-mode &&     micromamba install -n sagemaker-recovery-mode -y $JUPYTERLAB_VERSION $SAGEMAKER_JUPYTERLAB_VERSION $SUPERVISOR_VERSION &&     micromamba clean --all --yes --force-pkgs-dirs &&     rm -rf /opt/conda/etc/conda/test-files/ &&     find /opt/conda -name "yarn.lock" -type f -delete &&     rm -rf /tmp/*.in &&     sudo ln -s $(which python3) /usr/bin/python &&     sudo mkdir -p /etc/amazon-q/artifacts/agentic-chat &&     sudo curl -L "https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js" -o "/etc/amazon-q/artifacts/agentic-chat/jszip.min.js" &&     MANIFEST_URL="https://aws-toolkit-language-servers.amazonaws.com/qAgenticChatServer/0/manifest.json" &&     FLARE_SERVER_VERSION="1.25.0" &&     curl -L "$MANIFEST_URL" -o "/tmp/manifest.json" &&     ARTIFACT_URLS=$(python3 /tmp/get_amazon_q_agentic_chat_artifacts.py /tmp/manifest.json $FLARE_SERVER_VERSION) &&     if [ $? -ne 0 ] || [ -z "$ARTIFACT_URLS" ]; then echo "Failed to extract Amazon Q artifact URLs" && exit 1; fi &&     eval $ARTIFACT_URLS &&     curl -L "$SERVERS_URL" -o "/tmp/servers.zip" &&     sudo unzip "/tmp/servers.zip" -d "/etc/amazon-q/artifacts/agentic-chat/servers" &&     curl -L "$CLIENTS_URL" -o "/tmp/clients.zip" &&     sudo unzip "/tmp/clients.zip" -d "/etc/amazon-q/artifacts/agentic-chat/clients" &&     rm -f /tmp/manifest.json /tmp/servers.zip /tmp/clients.zip &&     npm i -g npm &&     conda config --remove channels defaults &&     micromamba config append channels conda-forge --env &&     extensionloc=/opt/amazon/sagemaker/sagemaker-code-editor-server-data/extensions && mkdir -p "${extensionloc}"     && for ext in /etc/code-editor/extensions/*.vsix; do         echo "Installing extension ${ext}...";         sagemaker-code-editor --install-extension "${ext}" --extensions-dir "${extensionloc}" --server-data-dir /opt/amazon/sagemaker/sagemaker-code-editor-server-data --user-data-dir /opt/amazon/sagemaker/sagemaker-code-editor-user-data;        done     && cp /etc/code-editor/code_editor_machine_settings.json /opt/amazon/sagemaker/sagemaker-code-editor-server-data/data/Machine/settings.json &&     cp /etc/code-editor/code_editor_user_settings.json /opt/amazon/sagemaker/sagemaker-code-editor-server-data/data/User/settings.json &&     install-glue-kernels &&     SITE_PACKAGES=$(pip show aws-glue-sessions | grep Location | awk '{print $2}') &&     jupyter-kernelspec install $SITE_PACKAGES/aws_glue_interactive_sessions_kernel/glue_pyspark --user &&     jupyter-kernelspec install $SITE_PACKAGES/aws_glue_interactive_sessions_kernel/glue_spark --user &&     mv /home/sagemaker-user/.local/share/jupyter/kernels/glue_pyspark /opt/conda/share/jupyter/kernels &&     mv /home/sagemaker-user/.local/share/jupyter/kernels/glue_spark /opt/conda/share/jupyter/kernels &&     sed -i '/if not store_history and (/i\        if "sm_analytics_runtime_check" in code:\n            return await self._complete_cell()\n'     "$SITE_PACKAGES/aws_glue_interactive_sessions_kernel/glue_kernel_base/BaseKernel.py" &&     INSTALLED_SSL=$(micromamba list | grep openssl | tr -s ' ' | cut -d ' ' -f 3 | head -n 1) &&     curl -L https://github.com/openssl/openssl/releases/download/openssl-$FIPS_VALIDATED_SSL/openssl-$FIPS_VALIDATED_SSL.tar.gz > openssl-$FIPS_VALIDATED_SSL.tar.gz &&      curl -L https://github.com/openssl/openssl/releases/download/openssl-$INSTALLED_SSL/openssl-$INSTALLED_SSL.tar.gz > openssl-$INSTALLED_SSL.tar.gz &&      tar -xf openssl-$FIPS_VALIDATED_SSL.tar.gz && tar -xf openssl-$INSTALLED_SSL.tar.gz && cd openssl-$FIPS_VALIDATED_SSL &&     ./Configure enable-fips --prefix=/opt/conda --openssldir=/opt/conda/ssl && make &&     cd ../openssl-$INSTALLED_SSL &&     ./Configure enable-fips --prefix=/opt/conda --openssldir=/opt/conda/ssl && make &&     cp ../openssl-$FIPS_VALIDATED_SSL/providers/fips.so providers/. &&     cp ../openssl-$FIPS_VALIDATED_SSL/providers/fipsmodule.cnf providers/. &&     make tests && cd ../openssl-$FIPS_VALIDATED_SSL &&     make install_fips && cd .. && rm -rf ./openssl-* &&     cp /opt/conda/ssl/openssl.cnf /opt/conda/ssl/openssl-fips.cnf &&     sed -i "s:# .include fipsmodule.cnf:.include /opt/conda/ssl/fipsmodule.cnf:" /opt/conda/ssl/openssl-fips.cnf &&     sed -i 's:# fips = fips_sect:fips = fips_sect:' /opt/conda/ssl/openssl-fips.cnf &&     pip install "krb5>=0.5.1,<0.6" &&     pip show krb5 | grep Require | xargs -i sh -c '[ $(echo {} | cut -d: -f2 | wc -w) -eq 0 ] ' &&     SYSTEM_PYTHON_PATH=$(python3 -c "from __future__ import print_function;import sysconfig; print(sysconfig.get_paths().get('purelib'))") &&     jupyter-kernelspec remove -f -y sparkrkernel &&     cp -a ${SYSTEM_PYTHON_PATH}/sagemaker_studio_analytics_extension/patches/configuration.py ${SYSTEM_PYTHON_PATH}/sparkmagic/utils/ &&     cp -a ${SYSTEM_PYTHON_PATH}/sagemaker_studio_analytics_extension/patches/reliablehttpclient.py ${SYSTEM_PYTHON_PATH}/sparkmagic/livyclientlib/reliablehttpclient.py &&     sed -i 's=  "python"=  "/opt/conda/bin/python"=g'  /opt/conda/share/jupyter/kernels/pysparkkernel/kernel.json /opt/conda/share/jupyter/kernels/sparkkernel/kernel.json &&     sed -i 's="Spark"="SparkMagic Spark"=g'  /opt/conda/share/jupyter/kernels/sparkkernel/kernel.json &&     sed -i 's="PySpark"="SparkMagic PySpark"=g'  /opt/conda/share/jupyter/kernels/pysparkkernel/kernel.json &&     jupyter labextension disable @jupyter/collaboration-extension

---> Running in afaf473c1a50
No ARG_BASED_ENV_IN_FILENAME passed
Transaction

  Prefix: /opt/conda

  Updating specs:

   - conda-forge::strands-agents
   - conda-forge::strands-agents-tools
   - conda-forge::strands-agents-mcp-server
   - conda-forge::libmamba[version='>=1.5.11,<1.6.0']
   - conda-forge::dash[version='<=2.18.1']
   - conda-forge::evaluate[version='<0.4.2']
   - conda-forge::catboost[version='>=1.1.1,<1.3.0',build=*cpu*]
   - conda-forge::libsqlite[version='<3.49.0']
   - conda-forge::urllib3[version='<2']
   - conda-forge::papermill[version='>=2.6.0']
   - conda-forge::plotly[version='<6.1.0']
Package                                           Version  Build                 Channel          Size
──────────────────────────────────────────────────────────────────────────────────────────────────────────
  Install:
──────────────────────────────────────────────────────────────────────────────────────────────────────────

  + ld_impl_linux-64                                   2.44  ha97dd6f_2            conda-forge     747kB
  + _libgcc_mutex                                       0.1  conda_forge           conda-forge       3kB
  + libgomp                                          15.1.0  h767d61c_5            conda-forge     447kB
  + libopentelemetry-cpp-headers                     1.21.0  ha770c72_1            conda-forge     363kB
  + nlohmann_json                                    3.12.0  h54a6638_1            conda-forge     136kB
  + hicolor-icon-theme                                 0.17  ha770c72_2            conda-forge      14kB
  + libglvnd                                          1.7.0  ha4b6fd6_2            conda-forge     132kB
  + _openmp_mutex                                       4.5  2_gnu                 conda-forge      24kB
  + libegl                                            1.7.0  ha4b6fd6_2            conda-forge      45kB
  + libgcc                                           15.1.0  h767d61c_5            conda-forge     824kB
  + libpciaccess                                       0.18  hb9d3cd8_0            conda-forge      28kB
  + xxhash                                            0.8.3  hb47aa4a_0            conda-forge     108kB
  + xorg-xorgproto                                   2024.1  hb9d3cd8_1            conda-forge     565kB
  + libiconv                                           1.18  h3b78370_2            conda-forge     790kB
  + xorg-libxau                                      1.0.12  hb9d3cd8_0            conda-forge      15kB
  + xorg-libxdmcp                                     1.1.5  hb9d3cd8_0            conda-forge      20kB
  + pthread-stubs                                       0.4  hb9d3cd8_1002         conda-forge       8kB
  + fribidi                                          1.0.16  hb03c661_0            conda-forge      61kB
  + libdeflate                                         1.24  h86f0d12_0            conda-forge      73kB
  + libutf8proc                                      2.11.0  hb04c3b8_0            conda-forge      86kB
  + libbrotlicommon                                   1.1.0  hb03c661_4            conda-forge      69kB
  + aws-c-common                                     0.12.4  hb03c661_0            conda-forge     236kB
  + yaml                                              0.2.5  h280c20c_3            conda-forge      85kB
  + libgfortran5                                     15.1.0  hcea5267_5            conda-forge       2MB
  + xorg-libice                                       1.1.2  hb9d3cd8_0            conda-forge      59kB
  + libwebp-base                                      1.6.0  hd42ef1d_0            conda-forge     429kB
  + libjpeg-turbo                                     3.1.0  hb9d3cd8_0            conda-forge     629kB
  + keyutils                                          1.6.3  hb9d3cd8_0            conda-forge     134kB
  + lzo                                                2.10  h280c20c_1002         conda-forge     191kB
  + c-ares                                           1.34.5  hb9d3cd8_0            conda-forge     207kB
  + reproc                                     14.2.5.post0  hb9d3cd8_0            conda-forge      34kB
  + ncurses                                             6.5  h2d0b736_3            conda-forge     892kB
  + libzlib                                           1.3.1  hb9d3cd8_2            conda-forge      61kB
  + libuuid                                          2.41.2  he9a06e4_0            conda-forge      37kB
  + libnsl                                            2.0.1  hb9d3cd8_1            conda-forge      34kB
  + liblzma                                           5.8.1  hb9d3cd8_2            conda-forge     113kB
  + libstdcxx                                        15.1.0  h8f9b012_5            conda-forge       4MB
  + libgcc-ng                                        15.1.0  h69a702a_5            conda-forge      29kB
  + libexpat                                          2.7.1  hecca717_0            conda-forge      75kB
  + libffi                                            3.4.6  h2dba641_1            conda-forge      57kB
  + bzip2                                             1.0.8  hda65f42_8            conda-forge     260kB
  + libdrm                                          2.4.125  hb03c661_1            conda-forge     311kB
  + libxcb                                           1.17.0  h8a09558_0            conda-forge     396kB
  + libbrotlienc                                      1.1.0  hb03c661_4            conda-forge     290kB
  + libbrotlidec                                      1.1.0  hb03c661_4            conda-forge      33kB
  + aws-c-compression                                 0.3.1  h92c474e_6            conda-forge      22kB
  + aws-checksums                                     0.2.7  h92c474e_2            conda-forge      77kB
  + aws-c-sdkutils                                    0.2.4  h92c474e_1            conda-forge      59kB
  + libgfortran                                      15.1.0  h69a702a_5            conda-forge      29kB
  + libedit                                    3.1.20250104  pl5321h7949ede_0      conda-forge     135kB
  + readline                                            8.2  h8c095d6_2            conda-forge     282kB
  + libpng                                           1.6.50  h421ea60_1            conda-forge     317kB
  + zlib                                              1.3.1  hb9d3cd8_2            conda-forge      92kB
  + tk                                               8.6.13  noxft_hd72426e_102    conda-forge       3MB
  + libsqlite                                        3.48.0  hee588c1_1            conda-forge     878kB
  + xorg-libsm                                        1.2.6  he73a12e_0            conda-forge      28kB
  + yaml-cpp                                          0.8.0  h3f2d84a_0            conda-forge     224kB
  + pixman                                           0.46.4  h54a6638_1            conda-forge     451kB
  + gflags                                            2.2.2  h5888daf_1005         conda-forge     120kB
  + graphite2                                        1.3.14  hecca717_2            conda-forge     100kB
  + lerc                                              4.0.0  h0aef613_1            conda-forge     264kB
  + snappy                                            1.2.2  h03e3b7b_0            conda-forge      46kB
  + libabseil                                    20250512.1  cxx17_hba17884_0      conda-forge       1MB
  + libstdcxx-ng                                     15.1.0  h4852527_5            conda-forge      29kB
  + lz4-c                                            1.10.0  h5888daf_1            conda-forge     167kB
  + zstd                                              1.5.7  hb8e6e7a_2            conda-forge     568kB
  + libsolv                                          0.7.35  h9463b59_0            conda-forge     518kB
  + reproc-cpp                                 14.2.5.post0  h5888daf_0            conda-forge      26kB
  + fmt                                              11.1.4  h07f6e7f_1            conda-forge     191kB
  + libev                                              4.33  hd590300_2            conda-forge     113kB
  + libsodium                                        1.0.20  h4ab18f5_0            conda-forge     206kB
  + libxcrypt                                        4.4.36  hd590300_1            conda-forge     100kB
  + wayland                                          1.24.0  h3e06ad9_0            conda-forge     330kB
  + pcre2                                             10.46  h1321c63_0            conda-forge       1MB
  + xorg-libx11                                      1.8.12  h4f16b4b_0            conda-forge     836kB
  + brotli-bin                                        1.1.0  hb03c661_4            conda-forge      20kB
  + libopenblas                                      0.3.30  pthreads_h94d23a6_2   conda-forge       6MB
  + libfreetype6                                     2.14.1  h73754d4_0            conda-forge     387kB
  + libprotobuf                                      6.31.1  h9ef548d_1            conda-forge       4MB
  + libre2-11                                    2025.08.12  h7b12aa8_1            conda-forge     211kB
  + gmp                                               6.3.0  hac33072_2            conda-forge     460kB
  + qhull                                            2020.2  h434a139_5            conda-forge     553kB
  + libcrc32c                                         1.1.2  h9c3ff4c_0            conda-forge      20kB
  + glog                                              0.7.1  hbabe93e_0            conda-forge     143kB
  + icu                                                75.1  he02047a_0            conda-forge      12MB
  + libtiff                                           4.7.1  h8261f1e_0            conda-forge     437kB
  + libglib                                          2.86.0  h1fed272_0            conda-forge       4MB
  + libglx                                            1.7.0  ha4b6fd6_2            conda-forge      76kB
  + xkeyboard-config                                   2.46  hb03c661_0            conda-forge     397kB
  + xorg-libxfixes                                    6.0.2  hb03c661_0            conda-forge      20kB
  + xorg-libxrender                                  0.9.12  hb9d3cd8_0            conda-forge      33kB
  + xorg-libxext                                      1.3.6  hb9d3cd8_0            conda-forge      50kB
  + brotli                                            1.1.0  hb03c661_4            conda-forge      20kB
  + libblas                                           3.9.0  36_h4a7cf45_openblas  conda-forge      17kB
  + libfreetype                                      2.14.1  ha770c72_0            conda-forge       8kB
  + re2                                          2025.08.12  h5301d42_1            conda-forge      27kB
  + mpfr                                              4.2.1  h90cbb55_3            conda-forge     635kB
  + libxml2-16                                       2.15.0  ha9997c6_1            conda-forge     556kB
  + openjpeg                                          2.5.4  h55fea9a_0            conda-forge     355kB
  + lcms2                                              2.17  h717163a_0            conda-forge     248kB
  + dbus                                             1.16.2  h3c4dab8_0            conda-forge     438kB
  + atk-1.0                                          2.38.0  h04ea711_2            conda-forge     356kB
  + glib-tools                                       2.86.0  hf516916_0            conda-forge     117kB
  + gdk-pixbuf                                       2.44.3  h2b0a6b4_0            conda-forge     573kB
  + gts                                               0.7.6  h977cf35_4            conda-forge     318kB
  + libglx-devel                                      1.7.0  ha4b6fd6_2            conda-forge      26kB
  + libgl                                             1.7.0  ha4b6fd6_2            conda-forge     135kB
  + xorg-libxcomposite                                0.4.6  hb9d3cd8_2            conda-forge      14kB
  + xorg-libxcursor                                   1.2.3  hb9d3cd8_0            conda-forge      33kB
  + xorg-libxinerama                                  1.1.5  h5888daf_1            conda-forge      14kB
  + xorg-libxxf86vm                                   1.1.6  hb9d3cd8_0            conda-forge      18kB
  + xorg-libxrandr                                    1.5.4  hb9d3cd8_0            conda-forge      30kB
  + xorg-libxi                                        1.8.2  hb9d3cd8_0            conda-forge      47kB
  + xorg-libxdamage                                   1.1.6  hb9d3cd8_0            conda-forge      13kB
  + libcblas                                          3.9.0  36_h0358290_openblas  conda-forge      17kB
  + liblapack                                         3.9.0  36_h47877c9_openblas  conda-forge      17kB
  + freetype                                         2.14.1  ha770c72_0            conda-forge     173kB
  + mpc                                               1.3.1  h24ddda3_1            conda-forge     117kB
  + libxml2                                          2.15.0  h26afc86_1            conda-forge      45kB
  + libgl-devel                                       1.7.0  ha4b6fd6_2            conda-forge     114kB
  + xorg-libxtst                                      1.2.5  hb9d3cd8_3            conda-forge      33kB
  + fontconfig                                       2.15.0  h7e30c49_1            conda-forge     266kB
  + libxkbcommon                                     1.11.0  hca5e8e5_1            conda-forge     800kB
  + libegl-devel                                      1.7.0  ha4b6fd6_2            conda-forge      30kB
  + at-spi2-core                                     2.40.3  h0630a04_0            conda-forge     658kB
  + epoxy                                            1.5.10  hb03c661_2            conda-forge     412kB
  + at-spi2-atk                                      2.38.0  h0630a04_3            conda-forge     340kB
  + tzdata                                            2025b  h78e105d_0            conda-forge     123kB
  + ca-certificates                                2025.8.3  hbd8a1cb_0            conda-forge     154kB
  + python_abi                                         3.12  8_cp312               conda-forge       7kB
  + font-ttf-dejavu-sans-mono                          2.37  hab24e00_0            conda-forge     397kB
  + font-ttf-inconsolata                              3.000  h77eed37_0            conda-forge      97kB
  + font-ttf-source-code-pro                          2.038  h77eed37_0            conda-forge     701kB
  + font-ttf-ubuntu                                    0.83  h77eed37_3            conda-forge       2MB
  + fonts-conda-forge                                     1  0                     conda-forge       4kB
  + fonts-conda-ecosystem                                 1  0                     conda-forge       4kB
  + orc                                               2.2.1  hd747db4_0            conda-forge       1MB
  + openssl                                           3.5.4  h26f9b46_0            conda-forge       3MB
  + libgd                                             2.3.3  h6f5c62b_11           conda-forge     177kB
  + cairo                                            1.18.4  h3394656_0            conda-forge     978kB
  + libssh2                                          1.11.1  hcf80075_0            conda-forge     305kB
  + libevent                                         2.1.12  hf998b51_1            conda-forge     427kB
  + s2n                                              1.5.26  h5ac9029_0            conda-forge     391kB
  + aws-c-cal                                         0.9.2  he7b75e1_1            conda-forge      51kB
  + libgrpc                                          1.73.1  h1e535eb_0            conda-forge       8MB
  + libnghttp2                                       1.67.0  had1ee68_0            conda-forge     667kB
  + libarchive                                        3.8.1  gpl_h7be2006_101      conda-forge     896kB
  + python                                           3.12.9  h9e4cc4f_0_cpython    conda-forge      32MB
  + krb5                                             1.21.3  h659f571_0            conda-forge       1MB
  + harfbuzz                                         12.1.0  h15599e2_0            conda-forge       2MB
  + libthrift                                        0.22.0  h454ac66_1            conda-forge     424kB
  + aws-c-io                                         0.22.0  h57f3b0d_1            conda-forge     181kB
  + libcups                                           2.3.3  hb8b1518_5            conda-forge       5MB
  + zeromq                                            4.3.5  h387f397_9            conda-forge     311kB
  + libcurl                                          8.14.1  h332b0f4_0            conda-forge     450kB
  + pango                                            1.56.4  hadf4263_0            conda-forge     455kB
  + aws-c-http                                       0.10.4  h94feff3_3            conda-forge     224kB
  + aws-c-event-stream                                0.5.6  h82d11aa_3            conda-forge      59kB
  + azure-core-cpp                                   1.16.0  h3a458e0_1            conda-forge     352kB
  + prometheus-cpp                                    1.3.0  ha5d0236_0            conda-forge     200kB
  + libgoogle-cloud                                  2.39.0  hdb79228_0            conda-forge       1MB
  + libmamba                                         1.5.12  h44b872a_2            conda-forge       2MB
  + librsvg                                          2.60.0  h61e6d4b_0            conda-forge       3MB
  + gtk3                                            3.24.43  h021d004_4            conda-forge       6MB
  + aws-c-mqtt                                       0.13.3  h2b1cf8c_6            conda-forge     216kB
  + aws-c-auth                                        0.9.1  h48c9088_3            conda-forge     123kB
  + azure-storage-common-cpp                        12.10.0  h4bb41a7_3            conda-forge     149kB
  + azure-identity-cpp                               1.12.0  ha729027_0            conda-forge     242kB
  + libopentelemetry-cpp                             1.21.0  hb9b0907_1            conda-forge     885kB
  + libgoogle-cloud-storage                          2.39.0  hdbdcf42_0            conda-forge     804kB
  + aws-c-s3                                          0.8.6  h4e5ac4b_5            conda-forge     137kB
  + azure-storage-blobs-cpp                         12.14.0  hb1c9500_1            conda-forge     578kB
  + aws-crt-cpp                                      0.34.4  h60c762c_0            conda-forge     408kB
  + azure-storage-files-datalake-cpp                12.12.0  h8b27e44_3            conda-forge     300kB
  + aws-sdk-cpp                                    1.11.606  h32384e2_4            conda-forge       3MB
  + libarrow                                         21.0.0  h56a6dad_8_cpu        conda-forge       6MB
  + libparquet                                       21.0.0  h790f06f_8_cpu        conda-forge       1MB
  + libarrow-compute                                 21.0.0  h8c2c5c3_8_cpu        conda-forge       3MB
  + libarrow-acero                                   21.0.0  h635bf11_8_cpu        conda-forge     581kB
  + libarrow-dataset                                 21.0.0  h635bf11_8_cpu        conda-forge     579kB
  + libarrow-substrait                               21.0.0  h3f74fd7_8_cpu        conda-forge     483kB
  + wheel                                            0.45.1  pyhd8ed1ab_1          conda-forge      63kB
  + setuptools                                       80.9.0  pyhff2d567_0          conda-forge     749kB
  + adwaita-icon-theme                                 49.0  unix_0                conda-forge     631kB
  + pip                                                25.2  pyh8b19718_0          conda-forge       1MB
  + filelock                                         3.19.1  pyhd8ed1ab_0          conda-forge      18kB
  + text-unidecode                                      1.3  pyhd8ed1ab_2          conda-forge      66kB
  + mpmath                                            1.3.0  pyhd8ed1ab_1          conda-forge     440kB
  + shellingham                                       1.5.4  pyhd8ed1ab_1          conda-forge      14kB
  + aiohappyeyeballs                                  2.6.1  pyhd8ed1ab_0          conda-forge      20kB
  + munkres                                           1.1.4  pyhd8ed1ab_1          conda-forge      16kB
  + pyparsing                                         3.2.5  pyhcf101f3_0          conda-forge     104kB
  + cycler                                           0.12.1  pyhd8ed1ab_1          conda-forge      13kB
  + pytz                                             2025.2  pyhd8ed1ab_0          conda-forge     189kB
  + cpython                                         3.12.11  py312hd8ed1ab_0       conda-forge      46kB
  + dataclasses                                         0.8  pyhc8e2a94_3          conda-forge      10kB
  + types-python-dateutil                    2.9.0.20250822  pyhd8ed1ab_0          conda-forge      25kB
  + chardet                                           5.2.0  pyhd8ed1ab_3          conda-forge     132kB
  + jmespath                                          1.0.1  pyhd8ed1ab_1          conda-forge      24kB
  + fsspec                                         2025.9.0  pyhd8ed1ab_0          conda-forge     146kB
  + itsdangerous                                      2.2.0  pyhd8ed1ab_1          conda-forge      19kB
  + sniffio                                           1.3.1  pyhd8ed1ab_1          conda-forge      15kB
  + hyperframe                                        6.1.0  pyhd8ed1ab_0          conda-forge      17kB
  + hpack                                             4.1.0  pyhd8ed1ab_0          conda-forge      31kB
  + zipp                                             3.23.0  pyhd8ed1ab_0          conda-forge      23kB
  + attrs                                            25.3.0  pyh71513ae_0          conda-forge      57kB
  + platformdirs                                      4.4.0  pyhcf101f3_0          conda-forge      24kB
  + mdurl                                             0.1.2  pyhd8ed1ab_1          conda-forge      14kB
  + python-multipart                                 0.0.20  pyhff2d567_0          conda-forge      28kB
  + python-dotenv                                     1.1.1  pyhe01879c_0          conda-forge      26kB
  + pywin32-on-windows                                0.1.0  pyh1179c8e_3          conda-forge       5kB
  + traitlets                                        5.14.3  pyhd8ed1ab_1          conda-forge     110kB
  + python-fastjsonschema                            2.21.2  pyhe01879c_0          conda-forge     245kB
  + entrypoints                                         0.4  pyhd8ed1ab_1          conda-forge      11kB
  + click                                             8.3.0  pyh707e725_0          conda-forge      92kB
  + narwhals                                          2.6.0  pyhcf101f3_0          conda-forge     254kB
  + packaging                                          25.0  pyh29332c3_1          conda-forge      62kB
  + wcwidth                                          0.2.14  pyhd8ed1ab_0          conda-forge      34kB
  + charset-normalizer                                3.4.3  pyhd8ed1ab_0          conda-forge      51kB
  + idna                                               3.10  pyhd8ed1ab_1          conda-forge      50kB
  + certifi                                        2025.8.3  pyhd8ed1ab_0          conda-forge     159kB
  + pygments                                         2.19.2  pyhd8ed1ab_0          conda-forge     889kB
  + slack-sdk                                        3.36.0  pyhd8ed1ab_0          conda-forge     150kB
  + docstring_parser                                 0.17.0  pyhd8ed1ab_0          conda-forge      32kB
  + python-tzdata                                    2025.2  pyhd8ed1ab_0          conda-forge     144kB
  + colorama                                          0.4.6  pyhd8ed1ab_1          conda-forge      27kB
  + six                                              1.17.0  pyhe01879c_1          conda-forge      18kB
  + typing_extensions                                4.15.0  pyhcf101f3_0          conda-forge      52kB
  + nest-asyncio                                      1.6.0  pyhd8ed1ab_1          conda-forge      12kB
  + blinker                                           1.9.0  pyhff2d567_0          conda-forge      14kB
  + retrying                                          1.4.2  pyhe01879c_0          conda-forge      21kB
  + pysocks                                           1.7.1  pyha55dd90_7          conda-forge      21kB
  + ansicolors                                        1.1.8  pyhd8ed1ab_0          conda-forge      14kB
  + tenacity                                          9.1.2  pyhd8ed1ab_0          conda-forge      25kB
  + pyjwt                                            2.10.1  pyhd8ed1ab_0          conda-forge      25kB
  + dill                                              0.4.0  pyhd8ed1ab_0          conda-forge      91kB
  + python-slugify                                    8.0.4  pyhd8ed1ab_1          conda-forge      19kB
  + python-gil                                      3.12.11  hd8ed1ab_0            conda-forge      46kB
  + binaryornot                                       0.4.4  pyhd8ed1ab_2          conda-forge      13kB
  + h2                                                4.3.0  pyhcf101f3_0          conda-forge      96kB
  + importlib-metadata                                8.7.0  pyhe01879c_1          conda-forge      35kB
  + markdown-it-py                                    4.0.0  pyhd8ed1ab_0          conda-forge      65kB
  + jupyter_core                                      5.8.1  pyh31011fe_0          conda-forge      60kB
  + plotly                                            6.0.1  pyhd8ed1ab_0          conda-forge       5MB
  + prompt-toolkit                                   3.0.52  pyha770c72_0          conda-forge     274kB
  + slack-bolt                                       1.25.0  pyhd8ed1ab_0          conda-forge     111kB
  + tqdm                                             4.67.1  pyhd8ed1ab_1          conda-forge      89kB
  + python-dateutil                             2.9.0.post0  pyhe01879c_2          conda-forge     233kB
  + exceptiongroup                                    1.3.0  pyhd8ed1ab_0          conda-forge      21kB
  + h11                                              0.16.0  pyhd8ed1ab_0          conda-forge      38kB
  + typer-slim                                       0.19.2  pyhcf101f3_0          conda-forge      47kB
  + typing-inspection                                 0.4.2  pyhd8ed1ab_0          conda-forge      19kB
  + typing-extensions                                4.15.0  h396c80c_0            conda-forge      91kB
  + _python_abi3_support                                1.0  hd8ed1ab_2            conda-forge       8kB
  + rich                                             14.1.0  pyhe01879c_0          conda-forge     201kB
  + arrow                                             1.3.0  pyhd8ed1ab_1          conda-forge     100kB
  + anyio                                            4.11.0  pyhcf101f3_0          conda-forge     138kB
  + uvicorn                                          0.37.0  pyh31011fe_0          conda-forge      51kB
  + annotated-types                                   0.7.0  pyhd8ed1ab_1          conda-forge      18kB
  + typer-slim-standard                              0.19.2  h6e3bb38_0            conda-forge       5kB
  + httpcore                                          1.0.9  pyh29332c3_0          conda-forge      49kB
  + starlette                                        0.48.0  pyhfdc7a7d_0          conda-forge      64kB
  + typer                                            0.19.2  pyhef33e25_0          conda-forge      79kB
  + httpx                                            0.28.1  pyhd8ed1ab_0          conda-forge      63kB
  + sse-starlette                                     3.0.2  pyhd8ed1ab_0          conda-forge      17kB
  + httpx-sse                                         0.4.1  pyhd8ed1ab_0          conda-forge      14kB
  + graphviz                                         13.1.2  h87b6fe6_0            conda-forge       2MB
  + gmpy2                                             2.2.1  py312hcaba1f9_1       conda-forge     215kB
  + propcache                                         0.3.1  py312h178313f_0       conda-forge      54kB
  + multidict                                         6.6.3  py312h178313f_0       conda-forge      97kB
  + unicodedata2                                     16.0.0  py312h4c3975b_1       conda-forge     405kB
  + kiwisolver                                        1.4.9  py312h0a2e395_1       conda-forge      77kB
  + pyarrow-core                                     21.0.0  py312hc195796_1_cpu   conda-forge       6MB
  + frozenlist                                        1.7.0  py312h447239a_0       conda-forge      55kB
  + python-xxhash                                     3.6.0  py312h0d868a3_0       conda-forge      24kB
  + rpds-py                                          0.27.1  py312h868fb18_1       conda-forge     389kB
  + tornado                                           6.5.2  py312h4c3975b_1       conda-forge     851kB
  + wrapt                                            1.17.3  py312h4c3975b_1       conda-forge      65kB
  + pyyaml                                            6.0.3  py312h8a5da7c_0       conda-forge     205kB
  + pillow                                           11.3.0  py312h7b42cdd_3       conda-forge       1MB
  + brotli-python                                     1.1.0  py312h1289d80_4       conda-forge     354kB
  + markupsafe                                        3.0.3  py312h8a5da7c_0       conda-forge      25kB
  + numpy                                            1.26.4  py312heda63a1_0       conda-forge       7MB
  + multiprocess                                    0.70.18  py312h5253ce2_1       conda-forge     368kB
  + pydantic-core                                    2.33.2  py312h680f630_0       conda-forge       2MB
  + hf-xet                                           1.1.10  py310h77a0e7f_2       conda-forge       3MB
  + pyzmq                                            27.1.0  py312hfb55c3c_0       conda-forge     212kB
  + yarl                                             1.20.1  py312h178313f_0       conda-forge     149kB
  + fonttools                                        4.60.1  py312h8a5da7c_0       conda-forge       3MB
  + pyarrow                                          21.0.0  py312h7900ff3_1       conda-forge      27kB
  + watchdog                                          6.0.0  py312h7900ff3_1       conda-forge     141kB
  + contourpy                                         1.3.3  py312hd9148b4_2       conda-forge     296kB
  + scipy                                            1.16.2  py312h7a1785b_0       conda-forge      17MB
  + pandas                                            2.3.3  py312hf79963d_1       conda-forge      15MB
  + matplotlib-base                                  3.10.6  py312he3d6523_1       conda-forge       8MB
  + python-graphviz                                    0.21  pyhbacfb6d_0          conda-forge      39kB
  + sympy                                            1.14.0  pyh2585a3b_105        conda-forge       5MB
  + aiosignal                                         1.4.0  pyhd8ed1ab_0          conda-forge      14kB
  + referencing                                      0.36.2  pyh29332c3_0          conda-forge      52kB
  + deprecated                                       1.2.18  pyhd8ed1ab_0          conda-forge      14kB
  + urllib3                                         1.26.19  pyhd8ed1ab_0          conda-forge     115kB
  + jinja2                                            3.1.6  pyhd8ed1ab_0          conda-forge     113kB
  + werkzeug                                          3.1.3  pyhd8ed1ab_1          conda-forge     244kB
  + pydantic                                        2.11.10  pyh3cfb1c2_0          conda-forge     308kB
  + jupyter_client                                    8.6.3  pyhd8ed1ab_1          conda-forg
e     106kB
  + jsonschema-specifications                      2025.9.1  pyhcf101f3_0          conda-forge      19kB
  + opentelemetry-api                                1.36.0  pyhd8ed1ab_0          conda-forge      46kB
  + botocore                                        1.40.45  pyhd8ed1ab_0          conda-forge       8MB
  + requests                                         2.32.5  pyhd8ed1ab_0          conda-forge      59kB
  + flask                                             3.1.2  pyhd8ed1ab_0          conda-forge      82kB
  + pydantic-settings                                2.11.0  pyh3cfb1c2_0          conda-forge      41kB
  + jsonschema                                       4.25.1  pyhe01879c_0          conda-forge      82kB
  + opentelemetry-semantic-conventions               0.57b0  pyh3cfb1c2_0          conda-forge     107kB
  + s3transfer                                       0.14.0  pyhd8ed1ab_0          conda-forge      66kB
  + responses                                        0.18.0  pyhd8ed1ab_0          conda-forge      36kB
  + huggingface_hub                                  0.35.3  pyhd8ed1ab_0          conda-forge     337kB
  + cookiecutter                                      2.6.0  pyhd8ed1ab_1          conda-forge     100kB
  + aws-requests-auth                                 0.4.3  pyhd8ed1ab_1          conda-forge      13kB
  + dash                                             2.18.1  pyhd8ed1ab_0          conda-forge       5MB
  + nbformat                                         5.10.4  pyhd8ed1ab_1          conda-forge     101kB
  + mcp                                              1.15.0  pyhd8ed1ab_0          conda-forge     123kB
  + opentelemetry-instrumentation                    0.57b0  pyhd8ed1ab_0          conda-forge      34kB
  + opentelemetry-sdk                                1.36.0  pyhd8ed1ab_0          conda-forge      79kB
  + boto3                                           1.40.45  pyhd8ed1ab_0          conda-forge      84kB
  + nbclient                                         0.10.2  pyhd8ed1ab_0          conda-forge      28kB
  + opentelemetry-instrumentation-threading          0.57b0  pyhd8ed1ab_0          conda-forge      18kB
  + strands-agents                                    0.3.0  pyhd8ed1ab_0          conda-forge     100kB
  + strands-agents-tools                              0.1.9  pyhd8ed1ab_0          conda-forge     135kB
  + strands-agents-mcp-server                         0.1.2  pyhd8ed1ab_0          conda-forge      14kB
  + catboost                                          1.2.7  cpu_py312he8b0ff3_1   conda-forge      10MB
  + aiohttp                                         3.12.15  py312h8a5da7c_0       conda-forge       1MB
  + datasets                                          2.2.1  pyhd8ed1ab_0          conda-forge     255kB
  + papermill                                         2.6.0  pyhd8ed1ab_2          conda-forge      38kB
  + evaluate                                          0.4.1  pyhd8ed1ab_0          conda-forge      63kB

  Summary:

  Install: 334 packages

  Total download: 271MB

──────────────────────────────────────────────────────────────────────────────────────────────────────────



Transaction starting




Transaction finished

To activate this environment, use:

    micromamba activate base

Or to execute a single command in this environment, use:

    micromamba run -n base mycommand
Traceback (most recent call last):
  File "/local/home/nagelan/ws/smd2/sagemaker-distribution/./src/main.py", line 513, in <module>
    parse_args(get_arg_parser())
  File "/local/home/nagelan/ws/smd2/sagemaker-distribution/./src/main.py", line 509, in parse_args
    args.func(args)
  File "/local/home/nagelan/ws/smd2/sagemaker-distribution/./src/main.py", line 203, in build_images
    image_ids, image_versions = _build_local_images(target_version, args.target_ecr_repo, args.force, args.skip_tests)
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/local/home/nagelan/ws/smd2/sagemaker-distribution/./src/main.py", line 278, in _build_local_images
    image, log_gen = _docker_client.images.build(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nagelan/miniconda3/envs/sagemaker-distribution-fixed/lib/python3.11/site-packages/docker/models/images.py", line 304, in build
    raise BuildError(chunk['error'], result_stream)
docker.errors.BuildError: The command '/usr/local/bin/_dockerfile_shell.sh if [[ -z $ARG_BASED_ENV_IN_FILENAME ]] ;     then echo 'No ARG_BASED_ENV_IN_FILENAME passed' ;     else envsubst < /tmp/$ARG_BASED_ENV_IN_FILENAME | tee --append /tmp/$ENV_IN_FILENAME ;     fi &&     micromamba install -y --name base --file /tmp/$ENV_IN_FILENAME --file /tmp/$PINNED_ENV_IN_FILENAME &&     mkdir -p $SAGEMAKER_RECOVERY_MODE_HOME &&     chown $MAMBA_USER:$MAMBA_USER $SAGEMAKER_RECOVERY_MODE_HOME &&     SUPERVISOR_VERSION=$(grep "^conda-forge::supervisor\[" /tmp/$ENV_IN_FILENAME) &&     JUPYTERLAB_VERSION=$(grep "^conda-forge::jupyterlab\[" /tmp/$ENV_IN_FILENAME) &&     SAGEMAKER_JUPYTERLAB_VERSION=$(grep "^conda-forge::sagemaker-jupyterlab-extension" /tmp/$ENV_IN_FILENAME) &&     echo "Installing in sagemaker-recovery-mode micromamba environment: $JUPYTERLAB_VERSION $SAGEMAKER_JUPYTERLAB_VERSION" &&     micromamba create -n sagemaker-recovery-mode &&     micromamba install -n sagemaker-recovery-mode -y $JUPYTERLAB_VERSION $SAGEMAKER_JUPYTERLAB_VERSION $SUPERVISOR_VERSION &&     micromamba clean --all --yes --force-pkgs-dirs &&     rm -rf /opt/conda/etc/conda/test-files/ &&     find /opt/conda -name "yarn.lock" -type f -delete &&     rm -rf /tmp/*.in &&     sudo ln -s $(which python3) /usr/bin/python &&     sudo mkdir -p /etc/amazon-q/artifacts/agentic-chat &&     sudo curl -L "https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js" -o "/etc/amazon-q/artifacts/agentic-chat/jszip.min.js" &&     MANIFEST_URL="https://aws-toolkit-language-servers.amazonaws.com/qAgenticChatServer/0/manifest.json" &&     FLARE_SERVER_VERSION="1.25.0" &&     curl -L "$MANIFEST_URL" -o "/tmp/manifest.json" &&     ARTIFACT_URLS=$(python3 /tmp/get_amazon_q_agentic_chat_artifacts.py /tmp/manifest.json $FLARE_SERVER_VERSION) &&     if [ $? -ne 0 ] || [ -z "$ARTIFACT_URLS" ]; then echo "Failed to extract Amazon Q artifact URLs" && exit 1; fi &&     eval $ARTIFACT_URLS &&     curl -L "$SERVERS_URL" -o "/tmp/servers.zip" &&     sudo unzip "/tmp/servers.zip" -d "/etc/amazon-q/artifacts/agentic-chat/servers" &&     curl -L "$CLIENTS_URL" -o "/tmp/clients.zip" &&     sudo unzip "/tmp/clients.zip" -d "/etc/amazon-q/artifacts/agentic-chat/clients" &&     rm -f /tmp/manifest.json /tmp/servers.zip /tmp/clients.zip &&     npm i -g npm &&     conda config --remove channels defaults &&     micromamba config append channels conda-forge --env &&     extensionloc=/opt/amazon/sagemaker/sagemaker-code-editor-server-data/extensions && mkdir -p "${extensionloc}"     && for ext in /etc/code-editor/extensions/*.vsix; do         echo "Installing extension ${ext}...";         sagemaker-code-editor --install-extension "${ext}" --extensions-dir "${extensionloc}" --server-data-dir /opt/amazon/sagemaker/sagemaker-code-editor-server-data --user-data-dir /opt/amazon/sagemaker/sagemaker-code-editor-user-data;        done     && cp /etc/code-editor/code_editor_machine_settings.json /opt/amazon/sagemaker/sagemaker-code-editor-server-data/data/Machine/settings.json &&     cp /etc/code-editor/code_editor_user_settings.json /opt/amazon/sagemaker/sagemaker-code-editor-server-data/data/User/settings.json &&     install-glue-kernels &&     SITE_PACKAGES=$(pip show aws-glue-sessions | grep Location | awk '{print $2}') &&     jupyter-kernelspec install $SITE_PACKAGES/aws_glue_interactive_sessions_kernel/glue_pyspark --user &&     jupyter-kernelspec install $SITE_PACKAGES/aws_glue_interactive_sessions_kernel/glue_spark --user &&     mv /home/sagemaker-user/.local/share/jupyter/kernels/glue_pyspark /opt/conda/share/jupyter/kernels &&     mv /home/sagemaker-user/.local/share/jupyter/kernels/glue_spark /opt/conda/share/jupyter/kernels &&     sed -i '/if not store_history and (/i\        if "sm_analytics_runtime_check" in code:\n            return await self._complete_cell()\n'     "$SITE_PACKAGES/aws_glue_interactive_sessions_kernel/glue_kernel_base/BaseKernel.py" &&     INSTALLED_SSL=$(micromamba list | grep openssl | tr -s ' ' | cut -d ' ' -f 3 | head -n 1) &&     curl -L https://github.com/openssl/openssl/releases/download/openssl-$FIPS_VALIDATED_SSL/openssl-$FIPS_VALIDATED_SSL.tar.gz > openssl-$FIPS_VALIDATED_SSL.tar.gz &&      curl -L https://github.com/openssl/openssl/releases/download/openssl-$INSTALLED_SSL/openssl-$INSTALLED_SSL.tar.gz > openssl-$INSTALLED_SSL.tar.gz &&      tar -xf openssl-$FIPS_VALIDATED_SSL.tar.gz && tar -xf openssl-$INSTALLED_SSL.tar.gz && cd openssl-$FIPS_VALIDATED_SSL &&     ./Configure enable-fips --prefix=/opt/conda --openssldir=/opt/conda/ssl && make &&     cd ../openssl-$INSTALLED_SSL &&     ./Configure enable-fips --prefix=/opt/conda --openssldir=/opt/conda/ssl && make &&     cp ../openssl-$FIPS_VALIDATED_SSL/providers/fips.so providers/. &&     cp ../openssl-$FIPS_VALIDATED_SSL/providers/fipsmodule.cnf providers/. &&     make tests && cd ../openssl-$FIPS_VALIDATED_SSL &&     make install_fips && cd .. && rm -rf ./openssl-* &&     cp /opt/conda/ssl/openssl.cnf /opt/conda/ssl/openssl-fips.cnf &&     sed -i "s:# .include fipsmodule.cnf:.include /opt/conda/ssl/fipsmodule.cnf:" /opt/conda/ssl/openssl-fips.cnf &&     sed -i 's:# fips = fips_sect:fips = fips_sect:' /opt/conda/ssl/openssl-fips.cnf &&     pip install "krb5>=0.5.1,<0.6" &&     pip show krb5 | grep Require | xargs -i sh -c '[ $(echo {} | cut -d: -f2 | wc -w) -eq 0 ] ' &&     SYSTEM_PYTHON_PATH=$(python3 -c "from __future__ import print_function;import sysconfig; print(sysconfig.get_paths().get('purelib'))") &&     jupyter-kernelspec remove -f -y sparkrkernel &&     cp -a ${SYSTEM_PYTHON_PATH}/sagemaker_studio_analytics_extension/patches/configuration.py ${SYSTEM_PYTHON_PATH}/sparkmagic/utils/ &&     cp -a ${SYSTEM_PYTHON_PATH}/sagemaker_studio_analytics_extension/patches/reliablehttpclient.py ${SYSTEM_PYTHON_PATH}/sparkmagic/livyclientlib/reliablehttpclient.py &&     sed -i 's=  "python"=  "/opt/conda/bin/python"=g'  /opt/conda/share/jupyter/kernels/pysparkkernel/kernel.json /opt/conda/share/jupyter/kernels/sparkkernel/kernel.json &&     sed -i 's="Spark"="SparkMagic Spark"=g'  /opt/conda/share/jupyter/kernels/sparkkernel/kernel.json &&     sed -i 's="PySpark"="SparkMagic PySpark"=g'  /opt/conda/share/jupyter/kernels/pysparkkernel/kernel.json &&     jupyter labextension disable @jupyter/collaboration-extension' returned a non-zero code: 1
Build completed at Sun Oct  5 02:55:02 UTC 2025
